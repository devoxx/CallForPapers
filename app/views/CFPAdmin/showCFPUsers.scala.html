@(allCfpUsers:Seq[(String, String)])(implicit lang: Lang, flash: Flash, req:RequestHeader)

@import play.twirl.api.Html

@main("Configure track leaders and reviewers"){
<div class="row">
    <div class="col-sm-12">
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3><i class="icon-user-md"></i> Configure track leaders and reviewers</h3>
            </div>

            <div class="panel-body">
            @if(flash.get("error").isDefined) {
            <div class="alert alert-danger alert-dismissable">
            <strong>Error :</strong>
            @flash.get("error").get
            </div>
            }
            @if(flash.get("success").isDefined) {
            <div class="alert alert-success alert-dismissable">
            @flash.get("success").get
            </div>
            }
            @helper.form(action = routes.CFPAdmin.updateTrackLeadersAndReviewers()) {
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                    <tr>
                        <th>Track name</th>
                        <th>Track leader</th>
                        <th>Track reviewers</th>
                    </tr>
                </thead>
                <tbody>
                        @ConferenceDescriptor.ConferenceTracks.ALL.map{track=>
                        <tr>
                            <td>@Html(Messages(track.label))</td>
                            <td>
                            <div class="input">
                                <select id="leader-@track.id" name="leader-@track.id">
                                        <option value="no_track_lead">--- No Track Leader ---</option>
                                         @allCfpUsers.map { uuidAndName =>
                                           <option @if(TrackLeader.isTrackLeader(track.id, uuidAndName._1)){ selected } value="@uuidAndName._1"> @uuidAndName._2 </option>
                                         }
                                </select>
                            </div>
                            </td>
                            <td>
                                @for(index <- 1 to 5) {
                                    <div class="input">
                                        <select id="reviewer-@track.id" name="reviewer-@track.id">
                                            <option value="no_reviewer">--- No Reviewer ---</option>
                                            @allCfpUsers.map { uuidAndName =>
                                                @uuidAndName
                                                <option @if(TrackLeader.isReviewer(track.id, index, uuidAndName._1)){ selected } value="@uuidAndName._1"> @uuidAndName._2 </option>
                                            }
                                        </select>
                                    </div>
                                }
                            </td>
                        </tr>
                        }
                </tbody>
            </table>
<button value="save" type="submit" class="btn btn-success" style="border-radius: 5px"><i class="icon-save"></i> Save the full list</button><br>
<a href="@routes.Backoffice.homeBackoffice()" class="btn btn-default" style="border-radius: 5px">Go back to Backoffice</a>
}

            </div>
        </div>
    </div>
</div>
}
