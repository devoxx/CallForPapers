@(schedule: ScheduleConfiguration, talkType: String, day: String)(implicit lang: Lang, flash: Flash, req: RequestHeader)

@import org.joda.time.DateTimeZone
@import models.ConferenceDescriptor
@import play.api.templates.Html

    @views.html.Publisher.devoxxUK(Messages("agenda-" + talkType),Some(s"Agenda for ${Messages("CONF.title")} for $day${Messages("day-" + day)}")) {
        <div class="large-12 columns">
            <h3>@Messages(talkType), @Messages("day-" + day)</h3>
            <p class="breadcrumb"><a href="@routes.Publisher.homePublisher()">@Messages("sw.home")</a>  &gt;
                <a href="@routes.Publisher.showByTalkType(talkType)">@Messages("sw.all." + talkType)</a>  &gt;
                <a href="@routes.Publisher.showByDay(day)">@Messages("day-" + day)</a> >
                @Messages("sw.details."+day)

            </p>
        </div>

        <div class="large-12 columns woocommerce">

            <table class="agendaTable">
                 @if(ConferenceDescriptor.isShowRoom) {
                     <tr>
                         <th><i class="icon-time"></i>  @Messages("publisher.room")</th>
                         @schedule.slots.groupBy(_.room).keys.toList.sorted.map { room: Room =>
                             <td>@room.name</td>
                         }
                     </tr>
                 }
                @if(day.toLowerCase=="thursday" && talkType.toLowerCase=="conf" ){
                    <tr>
                        <th>
                            09:00 - 11:00
                        </th>
                        <td class="keynotes" colspan="8">
                            Keynotes dès 9h précise<br>
                            <em>Accueil + Petit-déjeuner dès 7h30</em><br>
                        </td>
                    </tr>
                }

                 @if(day.toLowerCase == "friday" && talkType.toLowerCase == "conf") {
                    <tr>
                        <th>
                            09:30 - 11:00
                        </th>
                        <td class="keynotes" colspan="8">
                            <a href="https://devoxx.co.uk/keynotes-2018">Keynotes</a>

                        </td>
                    </tr>
                }

                @schedule.slots.groupBy(_.from).toList.sortBy(_._1.toDate.getTime).map { case (time: org.joda.time.DateTime, slots) =>
                <tr>
                    <th class="timeSlot">
                        <!--
                        time = @time
                        localdatetime = @time.toLocalDateTime
                        to = @slots.head.to.toDateTime(DateTimeZone.forID(ConferenceDescriptor.timeZone)).toString("h:mm")
                        -->
                        @time.toDateTime(DateTimeZone.forID(ConferenceDescriptor.timeZone)).toString("h:mm") -
                        @slots.head.to.toDateTime(DateTimeZone.forID(ConferenceDescriptor.timeZone)).toString("h:mm a")
                    </th>

                    @schedule.slots.groupBy(_.room).keys.toList.sorted.map { room: Room =>
                        <td class="room">
                          @slots.filter(slot => slot.room.name.equals(room.name)).sortBy(_.room).map { slot : Slot =>
                              @if(slot.proposal.isEmpty && slot.break.isEmpty) {
                                  &nbsp;
                              }
                              @if(slot.proposal.isDefined){
                                  <span class="track">
                                  @tags.publisher.renderIconForTrack(slot.proposal.get.track)  @Html(Messages(slot.proposal.get.track.label))
                                  </span>
                                  <br>
                                  <span class="title">
                                      <a href="@routes.Publisher.showDetailsForProposal(slot.proposal.get.id, slot.proposal.get.escapedTitle)">@slot.proposal.get.title</a>
                                  </span>
                                  <span class="speaker"> @slot.proposal.get.allSpeakerUUIDs.map { speakerUUID =>
                                    @tags.publisher.renderSpeaker(speakerUUID)
                                }</span>
                                @tags.publisher.renderFavorite(slot.proposal.get.id)
                            }
                          }
                        </td>
                    }
                </tr>
                }
                  @if(ConferenceDescriptor.isShowRoom) {
                      <tr>
                          <th><i class="icon-time"></i> Room</th>
                          @schedule.slots.groupBy(_.room).keys.toList.sorted.map { room: Room =>
                              <td>@room.name</td>
                          }
                      </tr>
                  }
            </table>
        </div>
    }
