@(speakerForm: Form[Speaker], readOnlyUUID:String)(implicit flash: Flash, lang: Lang, req:RequestHeader)

@import play.api.templates.Html

@main("Edit your profile") {

<style>
    .markdown-link {
        display: inline-block;
        padding-top: 10px;
        margin-left: 10px;
        font-size: 14px;
        color: #586069;
    }

    .prettyprint {
        display: block;
        color: #393318;
        background: rgba(255, 138, 0, 0.33);
        padding: 1%;
        width: 60%;
    }
</style>

<div class="row">
    <div class="col-md-8 page-header">
        <h3>@Messages("editProfile.title")</h3>
    </div>
    <div class="col-md-8">
        <p>@Messages("editProfile.help")</p>

        @if(flash.get("error").isDefined){
          <div class="alert alert-danger alert-dismissable">
              <strong>Error :</strong>
              @flash.get("error").get
          </div>
        }
        @if(flash.get("success").isDefined){
          <div class="alert alert-success alert-dismissable">
              @flash.get("success").get
          </div>
        }

        @helper.form(action = routes.CallForPaper.saveProfile) {
            <input type="hidden" name="email" value="@speakerForm("email").value.get">
            @helper.inputText(speakerForm("firstName"), 'size->80)
            @helper.inputText(speakerForm("lastName"), 'size->80)
            @helper.inputText(speakerForm("avatarUrl"), 'size->80)
            @helper.inputText(speakerForm("company"))
            @helper.textarea(speakerForm("bio"), 'cols -> 70, 'rows -> 5)
            <i class="icon-text-width"></i> : <span id="charsremain"></span>
            @helper.inputText(speakerForm("twitter"), 'placeholder -> "@nickname")
            @helper.inputText(speakerForm("blog"), 'size -> 50, 'placeholder -> "http://www.yourblog.com/")
            @helper.textarea(speakerForm("qualifications"), 'cols -> 70, 'rows -> 5)
            @helper.inputText(speakerForm("phoneNumber"))

            @tags.selectI18N(field = speakerForm("lang"), options=Seq(("en","English"),("fr","French")),  'class->"form-control")

            @if(Proposal.hasOneApprovedProposal(readOnlyUUID) || Proposal.hasOneAcceptedProposal(readOnlyUUID)) {
                <div class="prettyprint">
                    <h4><b>@Messages("speakerQandA")</b></h4>
                    @helper.repeat(speakerForm("questionAndAnswers"), min = 5) { questionAndAnswer =>
                        @Html("<hr color=#000000/>")
                        @if(Webuser.isMember(SecureCFPController.getCurrentUser(req).get.uuid, "admin") ||
                                Webuser.isMember(SecureCFPController.getCurrentUser(req).get.uuid, "cfp")) {
                            @helper.inputText(questionAndAnswer("question"), 'label -> "Question", 'size -> 70)
                        } else {
                            @helper.inputText(questionAndAnswer("question"), 'label -> "Question", 'size -> 70, 'disabled -> true)
                        }
                        @helper.textarea(questionAndAnswer("answer"), 'label -> "Answer", 'cols -> 70, 'rows -> 5)
                    }
                </div>
            }

            @helper.inputText(speakerForm("lang"), 'size->20, 'placeholder -> "en")


            <button class="btn btn-success" type="submit">@Messages("editProfile.save")</button>

            <div>
                <br/>
                <a class="markdown-link" href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet" target="_blank" data-ga-click="Markdown Toolbar, click, help">
                    <svg aria-hidden="true" class="octicon octicon-markdown v-align-bottom" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M14.85 3H1.15C.52 3 0 3.52 0 4.15v7.69C0 12.48.52 13 1.15 13h13.69c.64 0 1.15-.52 1.15-1.15v-7.7C16 3.52 15.48 3 14.85 3zM9 11H7V8L5.5 9.92 4 8v3H2V5h2l1.5 2L7 5h2v6zm2.99.5L9.5 8H11V5h2v3h1.5l-2.51 3.5z"></path></svg>
                    Styling with Markdown is supported in the above input and text areas (click for a quick cheatsheet)
                </a>
            </div>
        }
    <hr>
        <small>Your UUID: @readOnlyUUID</small>
    </div>
</div>

<script type="text/javascript" src="/assets/js/maxlength.js"></script>
<script type="text/javascript">
$(document).ready(function($){
    setformfieldsize($('#bio'), 750, 'charsremain');
});
</script>
}
